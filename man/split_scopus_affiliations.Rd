% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/split_scopus_affiliations.R
\name{split_scopus_affiliations}
\alias{split_scopus_affiliations}
\title{Split Scopus affiliations to one row per institution and extract country/name}
\usage{
split_scopus_affiliations(df, eid_col = "EID", affil_col = "Affiliations")
}
\arguments{
\item{df}{A data frame containing (at least) an EID column and an affiliation column.}

\item{eid_col}{Character. Name of the column containing the Scopus EID.}

\item{affil_col}{Character. Name of the column containing the raw affiliation text.}
}
\value{
A tibble with one row per affiliation, containing:
\itemize{
\item \code{eid} – the Scopus EID.
\item \code{affiliation_full} – the full affiliation string.
\item \code{affiliation_name} – the text before the first comma.
\item \code{country} – the text after the last comma.
}
}
\description{
This function processes a Scopus export by splitting the affiliation field
(typically a semicolon-separated string containing multiple institutions) into
one row per affiliation. For each affiliation, it extracts:
}
\details{
\itemize{
\item the full affiliation string,
\item the affiliation name (text before the first comma),
\item the country (text after the last comma).
}

This is useful for building collaboration networks, country-level statistics,
and affiliation-level bibliometric analysis.
}
\examples{
\dontrun{
data <- data.frame(
  EID = "2-s2.0-12345",
  Affiliations = "Utrecht University, Utrecht, Netherlands;
                  University of Oxford, Oxford, United Kingdom"
)

split_scopus_affiliations(data)
}

}
\seealso{
\code{\link[tidyr]{separate_rows}}, \code{\link[stringr]{str_trim}}
}
